## 람다를 이용한 도메인 전용 언어
언어의 주요 목표는 메시지를 명화가혹, 안정적인 반식으로 전달하는 것이다.

DSL 이라는 것은 작은, 범용이 아니라 특정 도메인을 대상으로 만들어진 특수 프로그래밍 언어다.


### 도메인 전용 언어
DSL은 특정 비즈니스 도메인을 인터페이스로 만든 API라고 생각할 수 있다.
DSL을 만들떄는 두가지 필요성을 생각하면서 DSL을 개발해야한다.
- 의사 소통의 왕 : 우리는 코드의 의도가 명확히 전달되어야 하며 프로그래머가 아닌 사람도 이해할 수 있어야 한다.
- 한 번 코드를 구현하지만 여러 번 읽는다 : 가독성은 유지보수의 핵심이다. 즉 항상 우리의 동료가 쉽게 이해할 수 있도록 코드를 구현해야한다.

1. DSL의 장점과 단점

장점
- 간결함 : API는 비즈니스 로직을 간편하게 캡슐화 하므로 반복을 피할 수 있고 코드를 간결하게 만들 수 있다.
- 가독성 : 도메인 영역의 용어를 사용하므로 비 도메인 전문가도 콛르르 쉽게 이해할 수 있다.
- 유지보수 : 잘 설계된 DSL로 구현된 코드는 쉽게 유지보수하고 바꿀 수 있다
- 높은 수준의 추상화 : DSL은 도메인과 같은 추상화 수준에서 동작하므로 도메인의 문제와 직접적으로 관련되 지않은 세부 사항을 숨긴다.
- 집중 : 비즈니스 도메인의 규칙을 표현할 목적으로 설계된 언어이므로 프로그래머가 특정 코드에 집중할 수 있다.
- 관심사 분리 : 지정된 언어로 비즈니스 로직을 표현함으로 애플리케이션의 인프라구조와 관련된 문제와 독립적으로 비즈니스 관련된 코드에서 집중하기가 용이하다.

단점
- DSL 설계의 어려움 : 간결하게 제한적인 언어에 도메인 지식을 담는 것이 쉬운 작업은 아니다.
- 개발 비용 : 코드에 DSL을 추가하는 작업은 초기 프로젝트에 많은 비용과 시간이 소모되는 작업이다.
- 추가 위회 계층 : DSL은 추가적인 계층으로 도메인 모델을 감싸며 이 떄 계층을 최대한 작게 만들어 성능 문제를 회피한다.
- 새로 배워야 하는 언어 :
- 호스팅 언어 한계

2. JVM에서 이용할 수 있는 다른 DSL 해결책
- 내부 DSL

자바로 구현한 DSL을 의미한다. 람다 표현식이 등장하면서 이문제가 어느정도 해결되었다.

- 다중 DSL
코틀린, 실론과 같은 다른 언어, 하지만 JVM으로 구동된다.

- 외부 DSL
새 언어를 파싱 -> 파서의 결과를 분석 -> 외부 DSL을 실행할 코드를 만들어야함
예) ANTLR

### 최신 자바 API의 작은 DSL
1. 스트림 API는 컬렉션을 조작하는 DSL
2. 데이터를 수집하는 DSL인 Collectors

### 자바로 DSL을 만드는 패턴과 기법
1. 메서드 체인
2. 중첩된 함수 이용
3. 람다 표현식을 이용한 함수 시퀀싱
4. 조합하기
5. DSL에 메서드 참조 사용하기

### 실생활의 자바 8 DSL
| 패턴 이름          | 장점                                                                                                                                                    | 단점                                                                                   |
|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
| 메서드 체인         | 1. 메서드 이름이 키워드 인수 역할을 한다.<br/> 2. 선택형 파라미터와 잘 동작한다.<br/>3. DSL 사용자가 정해진 순서로 메서드를 호출하도록 강제할 수 있다.<br/> 4. 정적 메서드를 최소화하거나 없앨수 있다.<br/>5. 문법적 잡음을 최소화한다. | 1. 구현이 장황하다.  <br/> 2. 빌드를 연결하는 접착 코드가 필요하다. <br/> 들여쓰기 규칙으로만 도메인 객체 계층을 정의한다.       |
| 중첩 함수          | 1. 구현의 장황함을 줄일 수 있다.<br/>2.함수 중첩으로 도메인 객체 계층을 반영한다.                                                                                                   | 정적 메서드의 사용이 빈번하다.<br/> 2. 이름이 아닌 위치로 인수를 정의한다.<br/> 3. 선택형 파라미터를 처리할 메서드 오버로딩이 필요하다. |
| 람다를 이용한 함수 시퀀싱 | 1. 선택형 파라미터와 잘 동작한다.<br/>2.정적 메서드를 최소화하거나 없앨 수 있다.<br/>람다 중첩으로 도메인 객체 계층을 반영한다.<br/>빌더의 접착 코드가 없다.                                                    | 1. 구현이 장황하다.<br/>2. 람다 표현식으로 인한 문법적 잡음이 DSL에 존재한다.                                   |


1. jOOQ
2. 큐컴버
3. 스프링 통합