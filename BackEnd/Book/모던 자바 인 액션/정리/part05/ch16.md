### CompletableFuture : 안정적 비동기 프로그래밍
1. Future의 단순 활용
시간이 걸리는 작업을 Future 내부로 설정하면 호출자 스레드가 결과를 기다리는 동안 다른 유용한 작업을 수행할 수 있다.
```java
        ExecutorService executor = Executors.newCachedThreadPool();
        Future<Double> future = executor.submit(new Callable<Double>() {
            @Override
            public Double call() throws Exception {
                public Double call() {
                    return doSomeLongComputation();
                }
            }
        });
        doSomethingElse();
        try{
            Double result = future.get(1, TimeUnit.SECONDS);
        } catch (ExecutionException ee){
            // 계산 중 예외 발생
        } catch (InterruptedException ie){
            // 현재 스레드에서 대기 중 인터럽트 발생
        }catch (TimeoutException te){
            // Future가 완료되기 전에 타임아웃 발생
        }
```
ExecutorService에서 제공한느 스레드가 시간이 오래 걸리는 작업을 처리하는 동안 우리 스레드로 다른 작업을 동시에 실행할 수 있다.
다른 작업을 처리하다가 시간이 오래 걸리는 작업의 결과가 필요한 시점이 되었을 때 Future의 get 메서드로 결과를 가져올 수 있다.
get 메서드를 호출했을 때 이미 계산이 완료되어 결과가 준비되었다면 즉시 결과를 반환하지만 결과가 준비되지 않았다면 작업이 완료될 때까지 우리 스레드를 블록시킨다.

1.1 Future 제한
여러 Future의 결과가 있을 때 이들의 의존성은 표현하기가 어렵다. 여러 Future끼리 상호 작용을 할때, 서로의 값을 전달, 조합하는 등의 요구사항을 쉽게 구현할 수 있어야한다.
아래와 같은 기능이 있다면 유용할 것이다.
- 두 개의 비동기 계산 결과를 하나로 합친다. 두 가지 계산결과는 서로 독립적일 수 있으며 또는 두 번쨰 결과가 첫 번쨰 결과에 의존하는 상황일 수 있다.
- Future 집합이 실행하는 모든 태스크의 완료를 기다린다.
- Future 집합에서 가장 빨리 완료되는 태스크를 기다렸다가 결과를 얻는다(예를 들어 여러 태스크가 다양한 방식으로 같은 결과를 구하는 상황)
- 프로그램적으로 Future를 완료시킨다(즉, 비동기 동작에 수동으로 결과 제공).
- Future 완료 동작에 반응한다.(즉, 결과를 기다리면서 블록되지 않고 결과가 준비되었다는 알림을 받은 다음에 Future의 결과로 원하는 추가 동작을 수행할 수 있음).

이러한 기능들을 CompletableFuture 클래스가 제공해준다.


1.2 CompletableFuture로 비동기 애플리케이션 만들기
- 고객에게 비동기 API를 제공하는 방벙블 배운다.
- 둘째, 동기 API를 사용해야 할 때 코드를 비블록으로 만드는 방벙블 배우낟. 두개의 비동기 동작을 파이프라인으로 만드는 방법과 두개의 동작 결과를 하나의 비동기 계산으로 합치는 방법을 살펴본다.
- 셋째, 비동기 동작의 완료에 대응하는 방법을 배운다.
> 동기 API와 비동기 API
> 동기 API에서는 메서드를 호출한 다음에 메서드가 계산을 완료할 때까지 기다린 후 반환된 값을 통해 다른 동작을 수행한다.
> 이러한 상황을 **블록 호출**이라고 부른다.
> 비동기 API에서는 메서드가 즉시 반환되며 끝내지 못한 나머지 작업을 호출자 스레드와 동기적으로 실행할 수 있도록 다른 스레드에 할당한다.
> 이러한 상황을 **비블록 호출**이라고 한다.

2. 비동기 API 구현
NonBlockingApi 참고

3. 비블록 코드 만들기
NonBlockingApi 참고

4. 비동기 작업 파이프라인 만들기